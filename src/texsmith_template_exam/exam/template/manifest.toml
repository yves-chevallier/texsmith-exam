[compat]
texsmith = ">=0.2.1,<1.0"

[latex.template]
name = "exam"
version = "0.1.0"
entrypoint = "template/template.tex"
engine = "lualatex"
shell_escape = false
texlive_year = 2023
tlmgr_packages = [
    "babel",
    "exam",
    "fontspec",
    "geometry",
    "graphicx",
    "hyperref",
    "lastpage",
    "multicol",
    "microtype",
    "pgf",
    "tcolorbox",
    "textcomp",
    "ulem",
    "xcolor",
]
fragments = [
    "ts-geometry",
    "ts-typesetting",
    "ts-fonts",
    "ts-extra",
    "ts-callouts",
    "ts-code",
    "ts-frame",
]

[latex.template.attributes.title]
default = ""
type = "string"
escape = "latex"
allow_empty = true
sources = ["title"]
description = "Exam title (from metadata or promoted heading)."

[latex.template.attributes.author]
default = ""
type = "any"
allow_empty = true
sources = ["author", "authors"]
description = "Author or instructor name."

[latex.template.attributes.date]
default = ""
type = "string"
escape = "latex"
allow_empty = true
sources = ["date"]
description = "Exam date (ISO or free-form)."

[latex.template.attributes.version]
default = ""
type = "string"
escape = "latex"
allow_empty = true
sources = ["version", "exam.version"]
description = "Exam version string (or 'git' to use git describe/commit)."

[latex.template.attributes.titlepage]
default = "cover"
type = "string"
allow_empty = true
sources = ["exam.titlepage", "titlepage"]
description = "Title layout ('cover' or 'minimal')."

[latex.template.attributes.type]
default = "exam"
type = "string"
escape = "latex"
allow_empty = true
sources = ["exam.type", "type"]
description = "Exam type (e.g., TE or Exam)."

[latex.template.attributes.department]
default = ""
type = "string"
escape = "latex"
allow_empty = true
sources = ["exam.department", "department"]
description = "Department code."

[latex.template.attributes.school]
default = ""
type = "string"
escape = "latex"
allow_empty = true
sources = ["exam.school", "school"]
description = "School name."

[latex.template.attributes.course]
default = ""
type = "string"
escape = "latex"
allow_empty = true
sources = ["exam.course", "course"]
description = "Course name or code."

[latex.template.attributes.problem_label]
default = ""
type = "string"
escape = "latex"
allow_empty = true
sources = ["exam.problem-label", "exam.problem_label", "problem-label", "problem_label"]
description = "Label for each question block (defaults to language-specific 'Problem')."

[latex.template.attributes.points]
default = true
type = "boolean"
allow_empty = false
sources = ["exam.points", "points"]
description = "Enable point display and cover-page grade table."

[latex.template.attributes.fillin_style]
default = "line"
type = "string"
allow_empty = false
sources = ["exam.fillin-style", "exam.fillin_style", "fillin-style", "fillin_style"]
description = "Style for \\fillin placeholders: 'line' (default) or 'dotted'."

[latex.template.attributes.compact]
default = false
type = "boolean"
allow_empty = false
sources = ["exam.compact", "compact"]
description = "Enable compact rendering mode for the exam renderer."

[latex.template.attributes.next_page_advice]
default = true
type = "boolean"
allow_empty = false
sources = ["exam.next-page-advice", "exam.next_page_advice", "next-page-advice", "next_page_advice"]
description = "Display a footer hint asking readers to continue to the next page."

[latex.template.attributes.duration]
default = ""
type = "any"
escape = "latex"
allow_empty = true
sources = ["exam.duration", "duration"]
description = "Exam duration in minutes."

[latex.template.attributes.rules]
default = []
type = "list"
sources = ["exam.rules", "rules"]
description = "List of rules to display on the cover page."

[latex.template.attributes.logo]
default = ""
type = "any"
allow_empty = true
sources = ["exam.logo", "logo"]
description = "Logo configuration (builtin key, none, or mapping with file/position)."

[latex.template.attributes.solution]
default = false
type = "boolean"
allow_empty = false
sources = ["exam.solution", "solution"]
description = "Enable answers/solutions mode (printanswers)."

[latex.template.attributes.language]
default = "english"
type = "string"
allow_empty = false
normaliser = "babel_language"
description = "Babel language for the document."

[latex.template.attributes.paper]
default = { format = "a4", margin = { top = "10mm", left = "2.5cm", right = "2.5cm", bottom = "2.5cm" } }
type = "mapping"
sources = ["press.paper", "paper"]
description = "Default page geometry (can be overridden via press.paper)."

[latex.template.attributes.geometry]
default = { headheight = "0mm", headsep = "0mm", includeheadfoot = true }
type = "mapping"
sources = ["press.geometry", "geometry"]
description = "Extra geometry options forwarded to ts-geometry."

[latex.template.attributes.hyperref_options]
default = "hidelinks"
type = "string"
allow_empty = true
sources = ["hyperref_options", "ts_extra_hyperref_options"]
description = "Options passed to hyperref when loaded by ts-extra."

[latex.template.slots.mainmatter]
default = true
depth = "section"
description = "Main exam content."

[latex.template.assets]
"heiglogo.sty" = { source = "template/heiglogo.sty" }
"columen.sty" = { source = "../columen/columen.sty" }
